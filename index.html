<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Script to play, manipulate and download YouTube videos" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <!-- generics -->
    <link rel="icon" href="images/favicon-32.png" sizes="32x32">
    <link rel="icon" href="images/favicon-96.png" sizes="96x96">
    <link rel="icon" href="images/favicon-128.png" sizes="128x128">
    <link rel="icon" href="images/favicon-192.png" sizes="192x192">

    <!-- iOS -->
    <link rel="apple-touch-icon" href="images/favicon-128.png" sizes="128x128">
    <link rel="apple-touch-icon" href="images/favicon-152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="images/favicon-180.png" sizes="180x180">

    <!-- Windows 8 IE 10-->
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="images/favicon-144.png">

    <!— Windows 8.1 + IE11 and above —>
    <meta name="msapplication-config" content="images/browserconfig.xml" />

    <meta name="msapplication-TileColor" content="#fefefe"/>
    <meta name="msapplication-square70x70logo" content="favicon-128.png"/>
    <meta name="msapplication-square150x150logo" content="favicon-270.png"/>
    <meta name="msapplication-TileImage" content="favicon-270.png"/>
    <meta name="msapplication-config" content="none"/>

    <title>Snarl's YouTube Video Player</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/snarly/yt6">View on GitHub</a>

          <h1 id="project_title">Yt6</h1>
          <h2 id="project_tagline">Script to play, manipulate and download YouTube videos</h2>

    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Right click on the link below and "Copy link address". If you have no such option, the code is written below the link, select and copy it manually.<br>Bookmark any page.<br>Edit the created bookmark's Properties / Location, remove the bookmark's original URL-address and paste this snippet of javascript code in its place. Give it an adequate name or description you want. Finally, save the bookmark(let).<br><br>Also, you can just drag and drop the link to the Bookmarks Toolbar or right click on it and select "Bookmark this link".</p>

<a href="javascript:(function(){var w=window,d=w.document;if(d.location.href.indexOf('youtube.com/watch')>-1||d.location.href.indexOf('/base.js')==d.location.href.length-8){var id='snarls_player',e='script';yt6=(w.yt6)?w.yt6:{};yt6d=(w.yt6d)?w.yt6d:{};yt6.loaded=0;function s(x){x=x||id;return d.getElementById(x)};function c(e){return d.createElement(e)};function a(q){s().appendChild(q);s().add_subs='en,hu,de';yt6d.src=q.src};function r(){if(s()){var x=s().querySelector('#'+id);if(x)s().removeChild(x)}};function b(){var i,j,o,x;o=['.githack','git','js'];for(j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);if(yt6d.src!=1)o.splice(0,0,'.githubusercontent');var q=c('div');q.id=id;if(q!=s())d.body.appendChild(q);var src='https://raw'+o[0]+'.com/snarly/yt6/master/yt6.js';var src0='https://cdn.jsdelivr.net/gh/snarly/yt6@latest/yt6.js';function oc(ox,oy,sr){return(oy!='js')?sr.replace(ox,oy):src0};var q=c(e);q.id=id;q.src=(o[0]!='js')?src:src0;q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[1],src);q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[2],src);q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[3],src);q.onerror=function(){var q=c(e);q.id=id;q.src=src.replace('https','http')};a(q);r();};a(q);r();};a(q);r();};try{a(q);}catch(f){a(q)};};function g(){try{deldiv()}catch(f){r()};yt6d.src=1;b()};if(!s()){b()};if(s()&&(!yt6.body||(yt6.loaded>1&&!s('mep_init'))))setTimeout(function(){if(!yt6.body||(yt6.body&&yt6.loaded>2&&!s('mep_init')))g()},3000);}else{void 0};})();/*201912101600*/">Yt6 -- Snarl's YouTube Video Player (bookmarklet)</a><br>
Last updated on Dec 10, 2019 16:00<br>
(Please try and use the latest version, and if it works well, dump the 
older ones. It may be crucial regarding its functionality.)<br>


<p><code>javascript:(function(){var w=window,d=w.document;if(d.location.href.indexOf('youtube.com/watch')>-1||d.location.href.indexOf('/base.js')==d.location.href.length-8){var id='snarls_player',e='script';yt6=(w.yt6)?w.yt6:{};yt6d=(w.yt6d)?w.yt6d:{};yt6.loaded=0;function s(x){x=x||id;return d.getElementById(x)};function c(e){return d.createElement(e)};function a(q){s().appendChild(q);s().add_subs='en,hu,de';yt6d.src=q.src};function r(){if(s()){var x=s().querySelector('#'+id);if(x)s().removeChild(x)}};function b(){var i,j,o,x;o=['.githack','git','js'];for(j,x,i=o.length;i;j=Math.floor(Math.random()*i),x=o[--i],o[i]=o[j],o[j]=x);if(yt6d.src!=1)o.splice(0,0,'.githubusercontent');var q=c('div');q.id=id;if(q!=s())d.body.appendChild(q);var src='https://raw'+o[0]+'.com/snarly/yt6/master/yt6.js';var src0='https://cdn.jsdelivr.net/gh/snarly/yt6@latest/yt6.js';function oc(ox,oy,sr){return(oy!='js')?sr.replace(ox,oy):src0};var q=c(e);q.id=id;q.src=(o[0]!='js')?src:src0;q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[1],src);q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[2],src);q.onerror=function(){var q=c(e);q.id=id;q.src=oc(o[0],o[3],src);q.onerror=function(){var q=c(e);q.id=id;q.src=src.replace('https','http')};a(q);r();};a(q);r();};a(q);r();};try{a(q);}catch(f){a(q)};};function g(){try{deldiv()}catch(f){r()};yt6d.src=1;b()};if(!s()){b()};if(s()&&(!yt6.body||(yt6.loaded>1&&!s('mep_init'))))setTimeout(function(){if(!yt6.body||(yt6.body&&yt6.loaded>2&&!s('mep_init')))g()},3000);}else{void 0};})();/*201912101600*/</code></p>


<p>__</p>

<p>On any YouTube video (watch) page, this bookmarklet will call an external player and load some extra functions, some of which can be used with YouTube's original player as well. It doesn't work with live streams as intended yet. To use it, you have to <strong><b>click on it on your bookmarks list</b></strong> each time you enter a video page, unless you have the code already running. Autoplay depends on the state of the "Loop Playlist" button on user-created playlists. Use the HTML5 emblem to switch between the native and this alternative player. The program is able to</p>
<p>
- restrict on-site advertisement,<br>
- resize, zoom, rotate and move around video picture arbitrarily,<br>
- change video playback rate ("speed" or tempo) from 0 or 25% to up to 500 or 800%,<br>
- select the desired media sequence to loop,<br>
- pick your favoured (and supported) video/audio codec and resolution for playback,<br>
- download the video/audio content,<br>
- download subtitles/closed captions (CC) (on bookmarklet line, edit the value of 'add_subs' (comma separated list of ISO 639-1 languge codes) to add Google-Translated tracks of your choice),<br>
- bypass age verification (only if video embedding is enabled by the content-owner).
</p>
<p>
It should work with almost any browser now, even older ones that are dated back to around the IE8 era. Until YouTube stops serving its classic layout, that is. Buggy new design is here to stay, bugs are gonna stay forever...</p>

<p>Credit should go to the authors of their respective open source code:<br>
<h3>
   John Dyer - Mediaelementplayer - <a href="http://mediaelementjs.com/">http://mediaelementjs.com/</a><br>
   Christian Heilmann - Transformvideo - <a href="http://github.com/codepo8/rotatezoomHTML5video">http://github.com/codepo8/rotatezoomHTML5video</a><br>
   Steven Penny - Youtube download bookmarklet - <a href="http://svnpenn.github.io/bm/">http://svnpenn.github.io/bm/</a><br>
</h3>
I just wrapped up to make their programs work together.</p>
<br>

<h1>Usage on mobile platform / Make it appear like an installed app</h1>
<br>

<p>
<strike>
As of yet, bookmarklets are not supported on mobile devices at all, so creating a bookmark of this kind is useless in that case.
</strike>
<br>
<br>
Bookmarklets work with most browsers on mobile too, although this one may seem like it does not when you try to launch it directly from your bookmarks list. However, if you 
<strong><b> tap the URL/address bar first </b></strong> (NOT the YouTube search bar!), most browsers will show it as an available option once you start typing either its name 
("Yt6" or whatever you named it) or the prefix "javascript:" to narrow down the search to bookmarklets only. Tapping on the correct entry on this quick search results list 
(while also being on a YouTube video page in the first place) will initiate the bookmarklet. 
So ultimately you won't need any of the extensions below to make use of this program in a mobile environment.
<br>
<br>
There are some browser extensions which can automate the execution of <strong><b>any javascript code</b></strong> specified by the user, upon each new page load. 
In our case this has just one benefit: not having to click/tap the bookmarklet because it will always be fired up as if it was an installed app. The major drawback, 
regardless of platform, is the possibility of numerous users sending another load request for the main script on each and every subsequent videos, which may cause 
heavy overload on its development url. (For example, in my experience Firefox Mobile does have the nasty habit of doing a full page refresh on every YouTube page change 
in Desktop view mode, which is exactly what would eventually trigger an overload.) The bookmarklet's code contains sanity checks for the current web location already, 
so nothing will happen if we are not on a YouTube video page. Still, it's better to turn off these add-ons when you have no particular need for them.
<br>
<br>
Please note that the <code>javascript:</code> prefix (with the colon) preceding the code is only required on a working bookmarklet line or at the address bar of the browser, serving as a tag to signal what comes after it, and as such, must be omitted from a body of script. The actual pure javascript part begins with <code>(function(){</code> here and ends with <code>})();</code>. Stuff between these <code>/* ... */</code> are just comments, they can be incorporated but the javascript interpreter will ignore them anyway. And one more thing: when you copy the code directly from the link, your browser may convert the space characters found inside of it into <code>%20</code>s. That's fine for a bookmarklet, but will break any plain javascript block. Unless you perform a Search & Replace <code>%20</code>s back to spaces before you'd feed the code to an add-on, you're better off with copying the written text instead, because touchy-touchy tap-tap devices are excruciatingly dumb when it comes to editing delicate texts...
<br>
<br>
I am not involved with any of the following software's development, I merely tested them to see if they really do what they claim to do. Use them at your own risk. (And keep in mind that on mobile you will inevitably bump into more bugs than on Desktop/Laptop.)

</p>
<br>
<p>
<strong><b>Kiwi Browser</b></strong> or <strong><b>Yandex</b></strong> (the only ones of the Chrome "family" which can have add-ons installed on Android and iOS at this time -- you may need to switch to Desktop view to be able to make use of the chrome web store)<br>
------------------------------------<br>
Add-on: <a href="https://chrome.google.com/webstore/detail/run-javascript/lmilalhkkdhfieeienjbiicclobibjao">"Run Javascript"</a>
<br>
With this one, you will have to visit each of the 3 possible YouTube domains (www.youtube.com = Desktop, m.youtube.com = Mobile, and music.youtube.com) to create a copy of the above javascript code for every one of them individually. Access to the add-on is found at the bottom of the "3-dot" Settings menu. Also, check the box in the upper right corner of the setup form to enable running on the given domain before you click Save.
<br>
<br>
<strong><b>Firefox</b></strong><br>
-----------<br>
Add-on: <a href="https://addons.mozilla.org/en/firefox/addon/my-js-injector">"JS Injector"</a>
<br>
This one won't give you the option to use different scripts on different domains, it will try to run the same one for all sites across the net. Unfortunately, it couldn't get my script to work on the YouTube Music subdomain. Maybe it's loading it up too early, before the site could finish loading some important parts of the page. Also, the mobile version of NoScript seems to prevent this add-on from normal operation, so I had to disable NoScript.
</p>
<br>

<p>__</p>

<p>
<br>Warning: Certain age-restricted videos may share their source location with known youtube video commercials which have already been registered with adblockers such as 
uBlock Origin or Brave Browser's ad-shield, and as a result, those videos will be blocked from view. Except if
<br> 1. you are logged in to an eligible user account
<br> 2. or, if allowed, watch the age-restricted video through an embedded iframe / external site
<br> 3. don't use ad-blockers at all
<br> 4. or set up exceptions in the ad-blocker's settings
<br>
<br>For example, on uBlock Origin's control panel, the explicit greenlighting of the domains
<br>
<br> youtube.com -- for the player data and
<br> googlevideo.com -- to access the media links
<br>
<br>will do the trick, although this way some video ads may also slip through the adblocker's defences. (You first need to activate the Advanced User mode in uBlock Origin's settings menu to be able to do this.)
<br>Tutorial: <a href="https://www.youtube.com/watch?v=SIYcI2tEqo8">https://www.youtube.com/watch?v=SIYcI2tEqo8</a>
<br>
</p>

<br>

<p>Note: Users of FF-addon NoScript</p>

<ol>
<li>
<p>Take a look at the Settings of NoScript and allow (i.e. uncheck) Embedded Objects:</p>

<p>&lt;AUDIO&gt; / &lt;VIDEO&gt;,
  &lt;IFRAME&gt;</p>
</li>
<li>
<p>Add to NoScript Settings / Whitelist</p>

<p>
  githubusercontent.com - program code is stored on this site<br>
  <a href="https://rawgit.com">rawgit.com</a> - #1 proxy to load the main script<br>
  <a href="https://raw.githack.com">githack.com</a> - #2<br>
  <a href="https://www.jsdelivr.com/">jsdelivr.net</a> - #3<br>
  <a href="https://allow-any-origin.appspot.com">allow-any-origin.appspot.com</a> - #1 proxy to get the decryption data<br>
  <a href="https://cors-anywhere.herokuapp.com">cors-anywhere.herokuapp.com</a> - #2<br>
  <a href="https://crossorigin.me">crossorigin.me</a> - #3 (these 3 were not necessary for some time now)<br>
  <a href="https://www.youtube.com">youtube.com</a> - won't even budge without its own javascript code running<br>
  googlevideo.com - youtube media is delivered through this domain<br>

</li>
<li>
<p>(DEPRECATED) Look at Firefox's internal page "about:config" (type it on the address bar) and edit the following entry</p>

<pre><code>noscript.inclusionTypeChecking.exceptions</pre></code>
<p> - add:</p>
<pre><code>https://raw.githubusercontent.com/snarly/yt6/master/yt6.js</code></pre>

<p>If the player still won't show up, check the browser's "Webdeveloper's Console" to see which files NoScript shows having trouble with on a repeated try, and add their full URL-address to this entry.</p>

</li>
</ol>

<p>__</p>

      <p>Notice to all users:</p>
      <p>The caching storage servers of rawgit.com, githack.com and jsdelivr.net always take some time to update their respective cached versions of the program.<br>
Rawgit is the quickest, it's usually updated in a matter of minutes, however the site is expected to go offline sometimes in the second half of 2019 by a decision of its maintainer.<br>
Githack used to be almost as responsive, but updating time has grown significantly since users began to migrate from rawgit to githack in masses, and now it can take hours for the cached code to reflect the actual latest edits.<br>
Jsdelivr has long been a widely used service and it can take as much as half a day to update its own cache, unfortunately.<br></p>

<p>Here is what you can do to see the effects of the latest edits immediately (or if you wish to revert to an earlier version which worked better for you):</p>

<a href="https://github.com/snarly/yt6/commits/master/yt6.js">On this page</a> you can see the history of edits made to the main program code with separate links to each and every versions.<br>

<p>For example, the latest edit from 7th of June, 2019 is<br>
<pre><code>https://github.com/snarly/yt6/commit/<strong><b>dac42cc19ef69c7fa2031080b216fb568e19df84</b></strong>#diff-601e2a866a5294ba4665ba1e54a34908<br>
commit ID: <strong><b>dac42cc19ef69c7fa2031080b216fb568e19df84</b></strong>
</code></pre>

<p>The string of characters in bold between "/commit/" and "#diff" is the unique ID of a particular edit (called commit), that's what you need. Select and copy it precisely, then edit the bookmarklet's line by replacing the words "master" and "latest" (found around the middle, without quotation marks) with this unique string. Once you do this, the program code loaded by the bookmarklet will be exactly the version you picked the ID from.</p>

<p>Keep in mind, however, that missing even a single character during the copy-paste process will make the bookmarklet inoperable, and leaving the bookmarklet like that will prevent future edits to ever be realised on your end. This is only a temporary solution in case you don't want to wait for the online caches to update. After 12 hours or so, it is advisable to reset the bookmarklet to its natural state (ie. removing the commit ID and putting the "master" and "latest" keywords back to their places).</p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
<!--        <p class="copyright">Yt6 maintained by <a href="https://github.com/snarly">snarly</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>-->
      </footer>
    </div>

    

  </body>
</html>
